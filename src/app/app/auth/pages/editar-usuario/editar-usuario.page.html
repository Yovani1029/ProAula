<ion-content>
  <ion-card>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-back-button defaultHref="/home"></ion-back-button>
        </ion-buttons>
        <ion-title>Editar Usuario</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-card-content>
      <form [formGroup]="usuarioForm" (ngSubmit)="guardarCambios()">
        <!-- Nombre -->
        <ion-item>
          <ion-label position="floating">Nombre</ion-label>
          <ion-input formControlName="nombre"></ion-input>
        </ion-item>
        <ion-note color="danger" *ngIf="usuarioForm.get('nombre')?.hasError('pattern') && usuarioForm.get('nombre')?.touched">
          El nombre no debe contener números ni caracteres especiales.
        </ion-note>

        <!-- Apellido -->
        <ion-item>
          <ion-label position="floating">Apellido</ion-label>
          <ion-input formControlName="apellido"></ion-input>
        </ion-item>
        <ion-note color="danger" *ngIf="usuarioForm.get('apellido')?.hasError('pattern') && usuarioForm.get('apellido')?.touched">
          El apellido no debe contener números ni caracteres especiales.
        </ion-note>

        <!-- Correo -->
        <ion-item>
          <ion-label position="floating">Correo</ion-label>
          <ion-input formControlName="correo" type="email"></ion-input>
        </ion-item>
        <ion-note color="danger" *ngIf="usuarioForm.get('correo')?.hasError('required') && usuarioForm.get('correo')?.touched">
          El correo es obligatorio.
        </ion-note>
        <ion-note color="danger" *ngIf="usuarioForm.get('correo')?.hasError('email') && !usuarioForm.get('correo')?.hasError('required')">
          Formato de correo inválido.
        </ion-note>

        <!-- Teléfono -->
        <ion-item>
          <ion-label position="floating">Teléfono</ion-label>
          <ion-input
            formControlName="telefono"
            type="tel"
            maxlength="10"
            (keypress)="onlyNumbers($event)">
          </ion-input>
        </ion-item>
        <ion-note color="danger" *ngIf="usuarioForm.get('telefono')?.hasError('pattern') && usuarioForm.get('telefono')?.touched">
          El teléfono debe tener exactamente 10 dígitos numéricos.
        </ion-note>

        <!-- Contraseña -->
        <ion-item>
          <ion-label position="floating">Nueva Contraseña</ion-label>
          <ion-input
            formControlName="contrasena"
            type="password"
            maxlength="4"
            (keypress)="onlyNumbers($event)">
          </ion-input>
        </ion-item>
        <ion-note color="medium">
          Solo si deseas cambiarla. Debe tener 4 dígitos numéricos.
        </ion-note>
        <ion-note color="danger" *ngIf="usuarioForm.get('contrasena')?.hasError('pattern') && usuarioForm.get('contrasena')?.touched">
          La contraseña debe contener exactamente 4 dígitos numéricos.
        </ion-note>

        <!-- Botones -->
        <ion-button expand="block" type="submit" [disabled]="usuarioForm.invalid">
          Guardar Cambios
        </ion-button>

        <ion-button expand="block" color="medium" (click)="cancelar()">
          Cancelar
        </ion-button>
      </form>
    </ion-card-content>
  </ion-card>
</ion-content>
